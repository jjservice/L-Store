<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="Shopping.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>LOLLIPOP CLUB</title>
  <style>
    /* Modal for image slider */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.9);
    }

    .modal-content {
      position: relative;
      margin: auto;
      padding: 20px;
      max-width: 80%;
      max-height: 80%;
    }

    .modal-content img {
      width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    /* Next and Previous buttons */
    .prev, .next {
      cursor: pointer;
      position: absolute;
      top: 50%;
      width: auto;
      padding: 16px;
      margin-top: -22px;
      color: #f1f1f1;
      font-weight: bold;
      font-size: 18px;
      transition: 0.3s;
      border-radius: 0 3px 3px 0;
    }

    .prev {
      left: 0;
    }

    .next {
      right: 0;
    }

    .prev:hover, .next:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }

    /* Style for cart items */
    .cart-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .cart-item img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      margin-right: 10px;
    }

    .cart-item .product-name {
      flex-grow: 1;
    }
  </style>
</head>
<body>
    <h1 onclick="toggleClassPlayer()">LOLLIP<ion-icon name="color-palette-outline"></ion-icon>P CLUB</h1>

    <!-- Search Bar -->
    <input type="text" id="search-bar" placeholder=".;.LOLLITA CLUB.;." oninput="searchProducts()">
    <button id="voice-search-btn" aria-label="Voice Search">üéôÔ∏è</button>      
    
    <!-- Show/Hide Cart Button -->
    <button id="toggle-cart" onclick="toggleCart()"><i class="fa fa-shopping-cart" aria-hidden="true"></i></button>
  
    <div class="cart" id="cart-container">
      <h2>Your Cart</h2>
      <ul id="cart-items"></ul>
      <p>Total: $<span id="total-price">0</span></p>
  
      <!-- Checkout Button -->
      <button id="checkout-button" onclick="checkout()">Check-Out</button>
    </div>

    <!-- Product List -->
    <ul class="product-List">
      <div class="product">
        <img src="Shirt1pic.webp" onclick="openModal(0)">
        <h3>Young & Rich - Men's T-shirt</h3>
        <p id="Price-tag">$14.50</p>
        <label for="quantity1">Qty:</label>
        <input type="number" id="quantity1" name="quantity" min="1" value="1" max="10">
        <p id="in-Stock">In Stock: <span id="stock1">10</span></p> <!-- Example stock value -->
        <button class="add-to-cart" data-product="Young & Rich - Men's T-shirt" data-price="14.50" data-image="Shirt1pic.webp">Add to Cart</button>
      </div>

      <div class="product">
        <img src="Vara pump - Women.webp" onclick="openModal(1)">
        <h3>Vara pump - Ferragamo Women's shoes</h3>
        <p id="Price-tag">$15</p>
        <label for="quantity2">Qty:</label>
        <input type="number" id="quantity2" name="quantity" min="1" value="1" max="5">
        <p id="in-Stock">In Stock: <span id="stock2">5</span></p> <!-- Example stock value -->
        <button class="add-to-cart" data-product="Vara pump - Ferragamo Women's shoes" data-price="15" data-image="Vara pump - Women.webp">Add to Cart</button>
      </div>

      <div class="product">
        <img src="Shirt2pic.jpg" onclick="openModal(2)">
        <h3>Converse T-shirt - Converse T-shirt</h3>
        <p id="Price-tag">$12.75</p>
        <label for="quantity3">Qty:</label>
        <input type="number" id="quantity3" name="quantity" min="1" value="1" max="8">
        <p id="in-Stock">In Stock: <span id="stock3">8</span></p> <!-- Example stock value -->
        <button class="add-to-cart" data-product="Converse T-shirt - Converse T-shirt" data-price="12.50" data-image="Shirt2pic.jpg">Add to Cart</button>
      </div>

      <div class="product">
        <img src="NIKE AIR MAX SHOES - NIKE AIR MAX 97 (2).png" onclick="openModal(3)">
        <h3>Nike Air Max Shoes - Nike Air Max 97</h3>
        <p id="Price-tag">$15</p>
        <label for="quantity4">Qty:</label>
        <input type="number" id="quantity4" name="quantity" min="1" value="1" max="6">
        <p id="in-Stock">In Stock: <span id="stock4">6</span></p> <!-- Example stock value -->
        <button class="add-to-cart" data-product="Nike Air Max Shoes - Nike Air Max 97" data-price="15" data-image="NIKE AIR MAX SHOES - NIKE AIR MAX 97 (2).png">Add to Cart</button>
      </div>
      <!-- Add other products here similarly -->
    </ul>

    <!-- Modal for displaying images -->
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="prev" onclick="changeSlide(-1)">&#10094;</span>
        <span class="next" onclick="changeSlide(1)">&#10095;</span>
        <img id="modal-image" src="" alt="Product Image">
      </div>
    </div>

    <script>
      const cartItemsContainer = document.getElementById('cart-items');
      const totalPriceElement = document.getElementById('total-price');
      const addToCartButtons = document.querySelectorAll('.add-to-cart');
      const cartContainer = document.getElementById('cart-container');
      const toggleCartButton = document.getElementById('toggle-cart');
      const checkoutButton = document.getElementById('checkout-button');

      // Function to update the cart display and local storage
      function updateCart() {
        // Retrieve the cart from localStorage (or an empty array if not found)
        const cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Clear the current cart display
        cartItemsContainer.innerHTML = '';

        // Initialize total price
        let totalPrice = 0;

        // Iterate through the cart items and display them
        cart.forEach((item, index) => {
          const listItem = document.createElement('li');
          listItem.classList.add('cart-item');

          // Display the product image, name, price, and quantity
          listItem.innerHTML = `
            <img src="${item.image}" alt="${item.product}">
            <div class="product-name">${item.product}</div>
            $${item.price} 
            <input type="number" class="quantity-input" value="${item.quantity}" data-index="${index}" min="1">
            x $${item.price} = $${(item.quantity * item.price).toFixed(2)}
            <button class="remove-item" data-index="${index}">Remove</button>
          `;

          // Append the list item to the cart
          cartItemsContainer.appendChild(listItem);

          // Update the total price
          totalPrice += item.price * item.quantity;
        });

        // Update the total price display
        totalPriceElement.textContent = totalPrice.toFixed(2);

        // Save the updated cart back to localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

        // Update the cart item count on the toggle cart button
        updateCartItemCount(cart);
      }

      // Function to update the cart item count indicator on the toggle button
      function updateCartItemCount(cart) {
        const cartItemCount = cart.reduce((total, item) => total + item.quantity, 0);
        const badge = toggleCartButton.querySelector('.cart-badge');

        if (cartItemCount > 0) {
          if (!badge) {
            const newBadge = document.createElement('span');
            newBadge.classList.add('cart-badge');
            toggleCartButton.appendChild(newBadge);
          }
          toggleCartButton.querySelector('.cart-badge').textContent = cartItemCount;
        } else {
          if (badge) {
            badge.remove();
          }
        }
      }

      // Function to handle adding items to the cart
      function addToCart(event) {
        const button = event.target;
        const product = button.getAttribute('data-product');
        const price = parseFloat(button.getAttribute('data-price'));
        const image = button.getAttribute('data-image');

        // Retrieve the current cart from localStorage or initialize it as an empty array
        const cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Check if the product is already in the cart
        const existingItem = cart.find(item => item.product === product);

        if (existingItem) {
          // If the product already exists, increase the quantity
          existingItem.quantity += 1;
        } else {
          // Otherwise, add the new product to the cart
          cart.push({ product, price, quantity: 1, image });
        }

        // Save the updated cart to localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

        // Update the cart display
        updateCart();
      }

      // Attach event listeners to all add-to-cart buttons
      addToCartButtons.forEach(button => {
        button.addEventListener('click', addToCart);
      });

      // Toggle the cart visibility
      function toggleCart() {
        cartContainer.classList.toggle('show');
      }

      // Handle checkout button click
      function checkout() {
        alert("Proceeding to checkout...");
        localStorage.removeItem('cart');
        updateCart();
      }

      // Function to open the modal for image viewing
      function openModal(productIndex) {
        const modal = document.getElementById('myModal');
        const modalImage = document.getElementById('modal-image');
        
        const products = [
          "Shirt1pic.webp",
          "Vara pump - Women.webp",
          "Shirt2pic.jpg",
          "NIKE AIR MAX SHOES - NIKE AIR MAX 97 (2).png"
        ];

        modalImage.src = products[productIndex];
        modal.style.display = "block";
      }

      // Change the image in the modal (next/prev buttons)
      function changeSlide(n) {
        const modalImage = document.getElementById('modal-image');
        const currentIndex = parseInt(modalImage.src.split('/').pop().split('.')[0]);
        let newIndex = currentIndex + n;

        if (newIndex < 0) newIndex = 3;
        if (newIndex > 3) newIndex = 0;

        modalImage.src = `images/image${newIndex}.jpg`; // Add logic for changing the image paths accordingly
      }

      // Add functionality to close the modal when clicked outside
      window.onclick = function(event) {
        const modal = document.getElementById('myModal');
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };

      // Call updateCart when the page loads
      updateCart();
    </script>
  <script src="node.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
